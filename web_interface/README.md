# 字幕翻译系统 Web 界面

这是字幕翻译系统的Web用户界面，基于Streamlit构建，提供直观的用户交互体验。

## 功能特性

### 🎯 核心功能
- **项目管理**: 创建、管理翻译项目
- **文件上传**: 支持多种字幕格式上传
- **翻译任务**: 配置和启动翻译任务
- **进度监控**: 实时跟踪翻译进度
- **结果预览**: 预览和下载翻译结果
- **系统状态**: 监控系统健康状态

### 📄 支持的文件格式
- SRT (SubRip)
- VTT (WebVTT)
- ASS (Advanced SubStation Alpha)
- SSA (SubStation Alpha)
- TXT (纯文本)

### 🌍 支持的语言
- 中文 (简体/繁体)
- 英语 (美式/英式)
- 日语、韩语
- 西班牙语、法语、德语
- 意大利语、葡萄牙语
- 俄语、阿拉伯语
- 泰语、越南语

## 安装和运行

### 环境要求
- Python 3.8+
- 已安装字幕翻译系统核心组件

### 安装依赖
```bash
# 进入Web界面目录
cd subtitle-translation-system/web_interface

# 安装依赖包
pip install -r requirements.txt
```

### 运行方式

#### 方式1: 使用启动脚本 (推荐)
```bash
python run_app.py
```

#### 方式2: 直接运行Streamlit
```bash
streamlit run app.py --server.port 8501
```

#### 方式3: 运行演示版本
```bash
streamlit run demo_app.py --server.port 8502
```

### 访问地址
- 完整版: http://localhost:8501
- 演示版: http://localhost:8502

## 使用指南

### 1. 项目管理
1. 在"项目管理"页面创建新项目
2. 设置项目名称、描述
3. 选择源语言和目标语言
4. 点击"创建项目"

### 2. 文件上传
1. 选择已创建的项目
2. 在"文件上传"页面上传字幕文件
3. 预览文件内容
4. 将文件添加到项目

### 3. 翻译任务
1. 在"翻译任务"页面配置翻译参数
2. 选择要翻译的文件和目标语言
3. 设置翻译质量等级
4. 配置高级选项（可选）
5. 点击"开始翻译"

### 4. 进度监控
1. 在"进度监控"页面查看任务状态
2. 实时跟踪翻译进度
3. 查看详细的任务信息
4. 启用自动刷新功能

### 5. 结果预览
1. 在"结果预览"页面选择完成的任务
2. 预览翻译结果
3. 下载输出文件
4. 查看翻译质量报告

### 6. 系统状态
1. 在"系统状态"页面监控系统健康
2. 查看Agent状态
3. 查看系统统计信息
4. 监控资源使用情况

## 配置选项

### 翻译质量等级
- **标准**: 快速翻译，适合日常使用
- **高质量**: 上下文分析，适合专业内容
- **专业级**: 文化本地化，适合商业用途

### 高级选项
- **最大并发任务数**: 控制同时处理的任务数量
- **重试次数**: 任务失败时的重试次数
- **超时时间**: 单个任务的最大执行时间

## 文件结构

```
web_interface/
├── __init__.py          # 模块初始化
├── app.py              # 主应用程序
├── demo_app.py         # 演示版应用
├── run_app.py          # 启动脚本
├── config.py           # 配置文件
├── utils.py            # 工具函数
├── requirements.txt    # 依赖包列表
└── README.md          # 说明文档
```

## 开发说明

### 主要组件
- `WebInterface`: 主界面类，包含所有页面渲染逻辑
- `DemoWebInterface`: 演示版界面类，用于功能演示
- `WebConfig`: 配置管理类
- `SessionStateManager`: 会话状态管理器

### 扩展功能
要添加新的功能页面：

1. 在`WebInterface`类中添加新的渲染方法
2. 在`render_sidebar`方法中添加页面选项
3. 在`run`方法中添加页面路由

### 自定义样式
在`app.py`中的CSS部分可以自定义界面样式：
```python
st.markdown("""
<style>
    /* 自定义CSS样式 */
</style>
""", unsafe_allow_html=True)
```

## 故障排除

### 常见问题

1. **端口被占用**
   ```bash
   # 查看端口使用情况
   lsof -i :8501
   # 杀死占用进程
   kill -9 <PID>
   ```

2. **依赖包缺失**
   ```bash
   # 重新安装依赖
   pip install -r requirements.txt
   ```

3. **系统连接失败**
   - 检查主控Agent是否正常运行
   - 确认系统组件已正确初始化

4. **文件上传失败**
   - 检查文件格式是否支持
   - 确认文件大小不超过限制
   - 验证文件编码格式

### 日志查看
Streamlit应用的日志会显示在终端中，包含：
- 系统启动信息
- 错误和警告信息
- 用户操作日志

## 性能优化

### 建议配置
- 内存: 至少4GB可用内存
- CPU: 多核处理器推荐
- 网络: 稳定的网络连接

### 优化建议
1. 限制同时上传的文件数量
2. 合理设置并发任务数
3. 定期清理临时文件
4. 启用缓存机制

## 安全注意事项

1. **文件验证**: 系统会验证上传文件的格式和内容
2. **大小限制**: 单个文件最大50MB
3. **类型检查**: 只允许指定格式的字幕文件
4. **临时文件**: 上传的文件存储在临时目录中

## 更新日志

### v1.0.0 (当前版本)
- 初始版本发布
- 支持基本的项目管理功能
- 实现文件上传和翻译任务创建
- 添加进度监控和结果预览
- 提供系统状态监控

## 技术支持

如果遇到问题或需要技术支持，请：
1. 查看本文档的故障排除部分
2. 检查系统日志信息
3. 确认系统环境配置正确
4. 联系技术支持团队

## 许可证

本软件遵循项目主许可证条款。